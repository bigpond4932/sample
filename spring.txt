우리가 작성 해야할 Controller 
BoardController
작성 해야할 기능 목록
전체 목록 요청 /board/list GET
등록처리 /board/register POST
조회 /board/get GET
삭세 /board/remove POST

페이징 처리
페이징 처리를 하려면 sql을 변경해야하는데 필요한 파라미터가 뭐뭐가 있을까
페이지 번호(pageNum)  , 한 페이지당 몇개의 데이터를 보여줄지 (amount) = 10 
==> 클래스로 관리를 합니다.


<![CDATA[ SQL구문 ]]>

SQL 구문안에 특수 문자가 들어갈 경우 XML파일에서 잘못 인식하는 경우를 막기위해 사용하는 처리하는 방법
(Character Data 줄임말) sql 구문안에 부등호같은 특수문자가 들어갈 떄 사용
xml 태그 만들때 

화면 밑에 페이지 번호 표시 , 페이지 번호를 클릭할수 있게

< 1 2 3 4 5 >

페이지 처리할때 필요한 정보들
현재 페이지 번호(pageNum)
이전과 다음으로 이동 가능한 링크를 표시(prev, next)
화면에서 보여지는 페이지의 시작, 마지막(start, end)

사용자가 5페이지를 보고 있다 =>  1~10
사용자가 19페이지를 보고 있다 =>  11~20

endpage : (int)(Math.ceil(페이지번호/10.0))*10;

startpage : 페이지 끝번호 계산 후 -9
	endpage - 9

전체 데이터 수 (total) 의 영향을 받는다.
진짜 끝번호 realend

realend : (int)(Math.ceil((total * 1.0) / amount))

if(realend < endpage){
	// 페이지 끝번호를 realend 로한다.
}

이전 페이지 / 다음 페이지
이전 페이지 : 현재 페이지 -1 (시작 페이지 번호가 1보다 큰경우만)
다음 페이지 : 현재 페이지 +1 (현재 페이지가 realend 페이지 보다 작을때만)


검색기능 : sql 로 구현

제목 / 내용 / 작성자
결과가 여러개 => 리스트화 시켜서 출력시킨다

<if test="type == 'T'.toString()">
	(content like '%'||#{keyword}||'%')
</if>
<if test="type == 'C'.toString()">
	(content like '%'||#{keyword}||'%')
</if>

<choose>
	<when test="type == 'T'.toString()">
		(content like '%'||#{keyword}||'%')
	</when>
	<when test="type == 'C'.toString()">
		(content like '%'||#{keyword}||'%')
	</when>
	<otherwise>
		 위에서 아무것도 조건읻 되지안앗을때
	</otherwise>
</choose>

sql 작성을 하는데 bno 라는 값이 null 이 아니면 where 절을 추가해서 bno 값을 비교하고 싶다
<where>
	<if test="bno != null">
		bno = #{bno}
	</if>
</where>


where 절 안에 and 나 or 을 추가하고 싶은 경우
<trim> 태그

<trim prefix="and">

</trim>

<foreach>

</foreach>



REST 방식으로 전환

과거의 서버의 데이터 제공 대상 :웹
현재 : 웹 + 수만은 기기들 (예: 스마트폰 등등)

스마트 폰에서 보이는 화면은 더이상 HTML 이 아니다


create table tbl_reply(
	rno number(10,0),
	bno number(10,0) not null,
	reply varchar2(1000) not null,
	replyer varchar2(50) not null,
	replyDate date default sysdate,
	updateDate date default sysdate
);


create sequence seq_reply minvalue 0 
maxvalue 99999999 increment by 1 start with 1 cycle;

alter table tbl_reply
add constraint pk_reply primary key (rno);

alter table tbl_reply
add constraint fk_reply_board foreign key(bno)
references tbl_board(bno);

파일 업로드

첨부파일 설정은 프로젝트에 web.xml 이 있는 경우에는 web, xml에서 처리해준다.
스프링 사용시 MultipartResolver 라는 타입의 객체를 빈으로 등록해서 사용
web 와 관련된 설정이므로 servlet-context.xml을 이용해서 빈으로 등록

파일 업로드시 고려해야 하는 점들

동일한 이름으로 파일이 업로드 되었을 때 기존 파일이 사라진다. (덮어쓰기 해버림)
네이버 메일에서 파일 업로드 하려고 했더니 zip일아 exe 이런 파일 업로드 막아버림
첨부파일 공격에 대비하기 위해 업로드 파일의 확장자를 제한
파일의 크기가 너무 큰 경우 사전 처리

파일이름 중복처리 방법
하나는 시간을 파일이름 앞에 붙여서 저장(일반적으로 많이 사용하는 방법)
또는 년/월/일 단위로 폴더 구조를 만들어서 저장
[2022]
	[05]
		[10]
			IU.jpg
2022_05_10_IU.jpg
UUID 범용 고유 식별자(네트워크상에서 고유성이 보장되는 ID)

이미지 크기가 너무 큰 경우 호면에 그대로 사용할 경우 많은 데이터를 소비해야 한다.
이미지 파일의 크기만큼 남은 데이터를 소모
특별한 경우가 아니면 이미지크기를 줄여서 썸네일 처리가 필요하다.
썸네일 처리는 우리가 직접하지 않고 라이브러리를 가져와서 사용.

